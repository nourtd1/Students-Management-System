const mongoose = require('mongoose'); const studentSchema = new mongoose.Schema({ nom: { type: String, required: [true, 'Le nom est requis'], trim: true }, prenom: { type: String, required: [true, 'Le pr�nom est requis'], trim: true }, dateNaissance: { type: Date, required: [true, 'La date de naissance est requise'] }, genre: { type: String, enum: ['Masculin', 'F�minin', 'Autre'], required: [true, 'Le genre est requis'] }, email: { type: String, trim: true, lowercase: true, match: [/^\S+@\S+\.\S+$/, 'Veuillez fournir un email valide'] }, telephone: { type: String, trim: true }, adresse: { rue: String, ville: String, codePostal: String, pays: String }, classe: { type: String, required: [true, 'La classe est requise'], trim: true }, matricule: { type: String, required: [true, 'Le matricule est requis'], unique: true, trim: true }, photo: { type: String, default: 'default.jpg' }, createdAt: { type: Date, default: Date.now }, createdBy: { type: mongoose.Schema.Types.ObjectId, ref: 'User' } }, { timestamps: true, toJSON: { virtuals: true }, toObject: { virtuals: true } }); studentSchema.virtual('resultats', { ref: 'Result', localField: '_id', foreignField: 'studentId', justOne: false }); const Student = mongoose.model('Student', studentSchema); module.exports = Student;
